<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
	<meta http-equiv=X-UA-Compatible content="ie=edge">
	<meta name=apple-mobile-web-app-capable content=yes>
	<meta name=apple-touch-fullscreen content=yes>
	<meta name=apple-mobile-web-app-status-bar-style content=black-translucent>
	<meta name=format-detection content="telephone=no">
	<meta name=format-detection content="email=no">
	<meta name=renderer content=webkit>
	<meta name=screen-orientation content=portrait>
	<meta name=x5-orientation content=portrait>
	<meta name=x5-fullscreen content=true>
	<meta name=full-screen content=yes>
	<meta name=keywords content="">
	<meta name=description content="">
	<meta http-equiv=Content-Type content="text/html; charset=utf-8">
	<title>Title</title>
	<script type="text/javascript" src="../../js/common/vue.js"></script>
	<script type="text/javascript" src="../../js/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="../../js/qrcode.js"></script>
	<script type="text/javascript" src="../../js/utf.js"></script>
	<script type="text/javascript" src="../../js/jquery.qrcode.min.js"></script>
	<script>
        (function (doc, win) {
            var docEl = doc.documentElement,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc = function () {
                    var clientWidth = docEl.clientWidth;
                    if (!clientWidth) return;
                    if (clientWidth >= 375) {
                        docEl.style.fontSize = '100px';
                    } else {
                        docEl.style.fontSize = 100 * (clientWidth / 375) + 'px';
                    }
                    var html = document.getElementsByTagName('html')[0];
                    var settedFs = settingFs = parseInt(100 * (clientWidth / 375));
                    var whileCount = 0;
                    while (true) {
                        var realFs = parseInt(window.getComputedStyle(html).fontSize);
                        var delta = realFs - settedFs;
                        //不相等
                        if (Math.abs(delta) >= 1) {
                            if (delta > 0)
                                settingFs--;
                            else
                                settingFs++;
                            html.setAttribute('style', 'font-size:' + settingFs + 'px!important');
                        } else
                            break;
                        if (whileCount++ > 100)
                            break
                    }
                };
            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);
	</script>
	<link href="sub.css" rel="stylesheet">
	<style>
		#h {
			text-align: center;
		}

		#h canvas {
			border-radius: 10px;
		}
	</style>
</head>
<body style="font-size: 0.05rem;"> <!--默认载人方法-->
<div id="app">
	<div id='qrcode' style="position: fixed;top: 0;left: 0;opacity: 1"></div>
	<img id='imgOne' class="ewmbox" style="position: fixed;top: 220px;left: 0;opacity: 0">

	<img style="opacity: 0" id="man-4" src="../../img/xtx/2.jpg">
	<canvas id="myCanvas" width="750" height="1180"></canvas>

	<img id="newImg">
</div>

<script>
    // var app = new Vue({
    //     el: '#app',
    //     data() {
    //         return {}
    //     },
    //     methods: {},
    // })

    $(function () {

        var qrcode = new QRCode("qrcode", {
            render: "canvas",
            text: 'http//www.baidu.com',
            width: "200",               //二维码的宽度
            height: "200",              //二维码的高度
            background: "#ffffff",       //二维码的后景色
            foreground: "#000000",        //二维码的前景色
            src: '../../img/xtx/1.jpg',             //二维码中间的图片
        });

        var canvas = $('#qrcode').find('canvas').get(0);
        // $('#imgOne').attr('src', canvas.toDataURL('image/jpg'));


        var img = new Image()
        img.src = canvas.toDataURL('image/jpg')
        img.onload = function () {
            var man1 = document.getElementById("man-4")
            var canvas = document.getElementById("myCanvas");
            ctx = canvas.getContext("2d");
            canvas.width = 300;
            canvas.height = 300;
			// 制作背景图
            var patBg = ctx.createPattern(img, "no-repeat");
            ctx.rect(10, 10, 750, 1180);
            ctx.fillStyle = patBg;
            ctx.fill();
            ctx.drawImage(man1, 0, 0, 50, 50);
            var newImg = new Image();
            newImg.src = canvas.toDataURL("image/png");
            var canvasNew = $('#myCanvas').get(0);
            $('#newImg').attr('src', canvasNew.toDataURL('image/jpg'));
        }


        // var man1 = document.getElementById("man-4"),
        //     canvasBg = document.getElementById("imgOne")
        // var canvas = document.getElementById("myCanvas");
        // ctx = canvas.getContext("2d");
        // canvas.width = 300;
        // canvas.height = 300;
        // // 制作背景图
        // var patBg = ctx.createPattern(canvasBg, "no-repeat");
        // ctx.rect(10, 10, 750, 1180);
        // ctx.fillStyle = patBg;
        // ctx.fill();
        // // 将man1,man2,man3,man4,sen1,btn加入画布
        // ctx.drawImage(man1, 0, 0, 50, 50);
        // var newImg = new Image();
        // newImg.src = canvas.toDataURL("image/png");
        //
        // var canvasNew = $('#myCanvas').get(0);
        //
        // $('#newImg').attr('src', canvasNew.toDataURL('image/jpg'));

    })


</script>
</body>
</html>
